{% load i18n lazysignup_tags %}

<div class="container">
    <div class="header">
        <div class="logo">
            <img src="{{ STATIC_URL }}piplmesh/images/logo.png" alt="PiplMesh" />
            <h1>Pipl Mesh</h1>
        </div>
        <div class="search">
            <div id="cse-search-form" style="width: 100%;">Loading</div>
            <script src="//www.google.com/jsapi" type="text/javascript"></script>
            <script type="text/javascript"> 
              google.load('search', '1', {language : 'en'});
              google.setOnLoadCallback(function() {
                var customSearchOptions = {};  var customSearchControl = new google.search.CustomSearchControl(
                  '016072476637476006446:s6mz47wv7i8', customSearchOptions);
                customSearchControl.setResultSetSize(google.search.Search.LARGE_RESULTSET);
                var options = new google.search.DrawOptions();
                options.setSearchFormRoot('cse-search-form');
                customSearchControl.draw('cse', options);
              }, true);
            </script>
            <link rel="stylesheet" href="//www.google.com/cse/style/look/default.css" type="text/css" />
        </div>
        <div class="userbar">
            <ul>
              <li>
            {% if not user|is_lazy_user %}
                {% trans "Hello" %}, {{ user }}
                <a href="{% url logout %}?redirect_to={{ request.path }}">{% trans "Logout" %}</a>
            {% else %}
                <a href="{% url login %}?redirect_to={{ request.path }}">{%trans "Login" %}</a> {% trans "or" %}
                {% trans "save your settings by" %} <a href="{% url lazysignup_convert %}?redirect_to={{ request.path }}">{% trans "registering" %}</a>. 
              </li>

              <li>
                <a href="{% url socialauth_begin 'facebook' %}">Login using Facebook</a>
              </li>

              <li>
                <ul>
                  {% for name in social_auth.backends.openid %}
                    <li>
                    {% if name != "livejournal" and name != "openid" %}
                      <a rel="nofollow" href="{% url socialauth_begin name %}">{{ name|title }}</a>
                    {% else %}
                      {% if name == "livejournal" %}
                      <form action="{% url socialauth_begin "livejournal" %}" method="post">{% csrf_token %}
                        <div>
                          <label for="openid_lj_user">LiveJournal user:</label>
                          <input id="openid_lj_user" type="text" value="" name="openid_lj_user" />
                          <input type="submit" value="Login"/>
                        </div>
                      </form>
                      {% else %}
                        {% if name == "openid" %}
                        <form action="{% url socialauth_begin "openid" %}" method="post">{% csrf_token %}
                          <div>
                            <label for="openid_identifier"><a href="http://openid.net/" title="OpenId">OpenId </a>Provider:</label>
                            <input id="openid_identifier" type="text" value="" name="openid_identifier" />
                            <input type="submit" value="Login" />
                          </div>
                        </form>
                        {% endif %}
                      {% endif %}
                    {% endif %}
                    </li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
            </ul>
        </div>
    </div>
